import{h as m,b as L,c as n,g,i as s,S as $,e as q,t as u,o as K,f as y,a as M,F}from"./web.507ce5e1.js";import{c as X,P as Y}from"./Paginator.2206affa.js";import{S as T,a as Z}from"./Spinner.8eb3cc57.js";const ee=u('<div><div class="w-1/2"></div><span class="absolute left-1/2 top-2 bottom-2 -translate-x-1/2 border-[1px] border-gray-300"></span><div class="w-1/2"></div></div>'),te=u('<div class="mr-4"></div>'),re=u('<div class="ml-4"></div>'),ne=t=>{const[a,w]=m(!1);return L(()=>{t.lastArticle&&(t.article1&&t.lastArticle.articles_slug===t.article1.articles_slug&&w(!0),t.article2&&t.lastArticle.articles_slug===t.article2.articles_slug&&w(!0))}),n($,{get when(){return t.article1||t.article2},get children(){const f=g(ee),v=f.firstChild,p=v.nextSibling,C=p.nextSibling;return s(v,n($,{get when(){return t.article1},keyed:!0,children:e=>(()=>{const d=g(te);return s(d,n(T,{get headline(){return e.articlesDrafts_headline},get excerpt(){return e.articlesDrafts_excerpt},get author(){return`${e.users_name1} ${e.users_name2}`},get authorId(){return e.users_userid},get category(){return e.categories_name},get categoryColor(){return e.categories_backgroundColor},get categoryLink(){return e.categories_name},get imageUrl(){return e.image},get articleUrl(){return`${t.baseUrl}${e.url}`},isVertical:!1,get isPortrait(){return e.articles_isThumbnailPortrait},hideCategoryAccent:!1,get page(){return t.page}})),d})()})),s(C,n($,{get when(){return t.article2},keyed:!0,children:e=>(()=>{const d=g(re);return s(d,n(T,{get headline(){return e.articlesDrafts_headline},get excerpt(){return e.articlesDrafts_excerpt},get author(){return`${e.users_name1} ${e.users_name2}`},get authorId(){return e.users_userid},get category(){return e.categories_name},get categoryColor(){return e.categories_backgroundColor},get categoryLink(){return e.categories_name},get imageUrl(){return e.image},get articleUrl(){return`${t.baseUrl}${e.url}`},isVertical:!1,get isPortrait(){return e.articles_isThumbnailPortrait},hideCategoryAccent:!1,get page(){return t.page}})),d})()})),L(()=>q(f,`relative flex w-full flex-row ${t.bottomBorder&&!a()&&"border-b-2 border-gray-300"} mt-2 pb-2`)),f}})},se=u(`<div class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"><p class="text-center font-arno text-lg md:text-2xl lg:text-4xl" id="searchFallback">We couldn't find anything for “<!#><!/>”</p></div>`),ae=u('<div class="flex  w-full flex-col" id="searchResults_container"><h1 class="mx-auto mb-4 text-lg md:mx-0 md:text-2xl lg:text-4xl">Results for “<!#><!/>”</h1><!#><!/></div>'),le=u('<div class="my-4 w-full" id="paginator-container"></div>'),ie=u('<div class="h-full w-full"><!#><!/><!#><!/><!#><!/></div>'),ce=u("<div></div>"),de=t=>{const[a,w]=m([]),[f,v]=m(),[p,C]=m(!0),[e,d]=m(""),[B,N]=m(0),[i,E]=m(0),Q=X("(min-width: 768px)"),c=6,V=5;return K(async()=>{const h=new URLSearchParams(window.location.search),b=Object.fromEntries(h.entries()).q;if(b&&b.length>0){const P=decodeURIComponent(b);d(P);const A=new FormData;A.append("searchterm",P),fetch("/api/searchSuggestions.php",{method:"POST",body:A}).then(async o=>{if(o.status!==200)throw new Error(o.statusText);const _=await o.json();if(_.result)v(_.response[_.response.length-1]),w(_.response),N(Math.ceil(_.response.length/c)),E(0);else throw new Error("Bad result from search API")}).catch(o=>{console.error(o)}).finally(()=>C(!1))}else C(!1)}),(()=>{const h=g(ie),I=h.firstChild,[b,P]=y(I.nextSibling),A=b.nextSibling,[o,_]=y(A.nextSibling),j=o.nextSibling,[O,H]=y(j.nextSibling);return s(h,n(Z,{showAccessor:p}),b,P),s(h,n($,{get when(){return M(()=>a()===null||a().length===0)()&&!p()},get children(){const l=g(se),x=l.firstChild,U=x.firstChild,k=U.nextSibling,[S,D]=y(k.nextSibling);return S.nextSibling,s(x,e,S,D),l}}),o,_),s(h,n($,{get when(){return M(()=>a()!==null&&a().length>0)()&&!p()},get children(){return[(()=>{const l=g(ae),x=l.firstChild,U=x.firstChild,k=U.nextSibling,[S,D]=y(k.nextSibling);S.nextSibling;const W=x.nextSibling,[z,G]=y(W.nextSibling);return s(x,e,S,D),s(l,n($,{get when(){return Q()},get fallback(){return n(F,{get each(){return[...a().slice(i()*c,i()*c+c)]},children:(r,J)=>(()=>{const R=g(ce);return s(R,n(T,{get headline(){return r.articlesDrafts_headline},get excerpt(){return r.articlesDrafts_excerpt},get author(){return`${r.users_name1} ${r.users_name2}`},get authorId(){return r.users_userid},get category(){return r.categories_name},get categoryColor(){return r.categories_backgroundColor},get categoryLink(){return r.categories_name},get imageUrl(){return r.image},get articleUrl(){return`${t.baseUrl}${r.url}`},isVertical:!1,get isPortrait(){return r.articles_isThumbnailPortrait},hideCategoryAccent:!1,page:i})),L(()=>q(R,`mt-4 ${J()!==c-1&&r.articles_slug!==f()?.articles_slug&&"border-b-2 border-gray-300"} pb-4`)),R})()})},get children(){return n(F,{each:[0,2,4],children:r=>n($,{get when(){return a().length>=i()*c+r},get children(){return n(ne,{get article1(){return a()[i()*c+r]},get article2(){return a()[i()*c+r+1]},bottomBorder:r!==4,page:i,get baseUrl(){return t.baseUrl},get lastArticle(){return f()}})}})})}}),z,G),l})(),(()=>{const l=g(le);return s(l,n(Y,{page:i,setPage:E,pages:B,pagesToDisplay:V})),l})()]}}),O,H),h})()};export{de as default};
