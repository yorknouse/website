import{h as P,j as K,o as X,g as u,f as y,i as s,a as q,b as I,e as f,s as T,t as d,c as o,S as U,k as Z,F as G}from"./web.37b92b9c.js";import{c as p,P as ee}from"./Paginator.84861924.js";const te=d('<div class="article h-full overflow-hidden text-ellipsis"><div><!#><!/><div><!#><!/><div class="mb-2"><a class="headline"><p class="text-l text-black xl:text-xl 2xl:text-2xl"></p></a><a class="author"><p class="text-sm italic text-black 2xl:text-base"><span>By </span><!#><!/></p></a></div><a class="excerpt"><p class="text-xs text-black xl:text-sm 2xl:text-base"></p></a></div></div></div>'),re=d('<a><div><div class="m-auto h-10 w-10 animate-spin rounded-full border-t-2 border-l-2 border-black"></div></div><img alt="Article Thumbnail"></a>'),le=d('<a><img src="https://bbcdn.nouse.co.uk/file/nousePublicBackendUploads/db/webUploads/public/ARTICLE-THUMBNAIL/mWMFA4fY1ENg25x%20breakingNews_large.jpg" alt="Article Thumbnail"></a>'),ne=d("<a></a>"),z=e=>{const[R,S]=P(!1),C="https://bbcdn.nouse.co.uk/file/nousePublicBackendUploads/db/webUploads/public/ARTICLE-THUMBNAIL/mWMFA4fY1ENg25x%20breakingNews_large.jpg",k=()=>`border-color-${e.category} border-t-2`;return K(X(e.page,()=>S(!1))),(()=>{const L=u(te),A=L.firstChild,r=A.firstChild,[h,Q]=y(r.nextSibling),g=h.nextSibling,M=g.firstChild,[N,v]=y(M.nextSibling),V=N.nextSibling,$=V.firstChild,B=$.firstChild,m=$.nextSibling,D=m.firstChild,E=D.firstChild,x=E.nextSibling,[w,W]=y(x.nextSibling),j=V.nextSibling,O=j.firstChild;return s(A,(()=>{const l=q(()=>!!e.imageUrl);return()=>l()?(()=>{const n=u(re),c=n.firstChild,a=c.nextSibling;return a.addEventListener("load",()=>S(!0)),a.addEventListener("error",({currentTarget:t})=>{t.src!==C&&(t.src=C)}),I(t=>{const _=`image-link relative ${e.isVertical?"w-full":"h-full w-1/2"}`,b=e.articleUrl,F=`absolute top-0 left-0 flex h-full w-full flex-col bg-whiteish-100 ${R()&&"hidden"}`,H=`${e.isPortrait?"aspect-{9/16} h-full":"aspect-video w-full"} rounded-xl object-cover ${e.isVertical&&"mb-5"}`,i=e.imageUrl;return _!==t._v$7&&f(n,t._v$7=_),b!==t._v$8&&T(n,"href",t._v$8=b),F!==t._v$9&&f(c,t._v$9=F),H!==t._v$10&&f(a,t._v$10=H),i!==t._v$11&&T(a,"src",t._v$11=i),t},{_v$7:void 0,_v$8:void 0,_v$9:void 0,_v$10:void 0,_v$11:void 0}),n})():(()=>{const n=u(le),c=n.firstChild;return I(a=>{const t=`image-link relative ${e.isVertical?"w-full":"h-full w-1/2"}`,_=e.articleUrl,b=`${e.isPortrait?"aspect-{9/16} h-full":"aspect-video w-full"} rounded-xl object-cover ${e.isVertical&&"mb-5"}`;return t!==a._v$12&&f(n,a._v$12=t),_!==a._v$13&&T(n,"href",a._v$13=_),b!==a._v$14&&f(c,a._v$14=b),a},{_v$12:void 0,_v$13:void 0,_v$14:void 0}),n})()})(),h,Q),s(g,(()=>{const l=q(()=>!e.hideCategoryAccent);return()=>l()&&(()=>{const n=u(ne);return s(n,()=>e.category),I(c=>{const a=`text-l category-text category-color-${e.category} uppercase xl:text-xl 2xl:text-2xl`,t=`/${e.categoryLink}`;return a!==c._v$15&&f(n,c._v$15=a),t!==c._v$16&&T(n,"href",c._v$16=t),c},{_v$15:void 0,_v$16:void 0}),n})()})(),N,v),s(B,()=>e.headline),s(D,()=>e.author,w,W),s(O,()=>e.excerpt),I(l=>{const n=`flex ${e.isVertical?"flex-col":"flex-row"}`,c=`${e.isVertical||e.imageUrl==null?"w-full":"ml-3 h-full w-1/2"} ${!e.hideCategoryAccent&&k()}`,a=e.articleUrl,t=`/author/${e.authorId}`,_=`category-color-${e.category}`,b=e.articleUrl;return n!==l._v$&&f(A,l._v$=n),c!==l._v$2&&f(g,l._v$2=c),a!==l._v$3&&T($,"href",l._v$3=a),t!==l._v$4&&T(m,"href",l._v$4=t),_!==l._v$5&&f(E,l._v$5=_),b!==l._v$6&&T(j,"href",l._v$6=b),l},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),L})()},ae=d('<div><div class="w-1/2"></div><span class="absolute left-1/2 top-2 bottom-2 -translate-x-1/2 border-[1px] border-gray-300"></span><div class="w-1/2"></div></div>'),ie=d('<div class="mr-4"></div>'),se=d('<div class="ml-4"></div>'),ce=e=>{const[R,S]=P(!1);return I(()=>{e.lastArticle&&(e.article1&&e.lastArticle.articles_slug===e.article1.articles_slug&&S(!0),e.article2&&e.lastArticle.articles_slug===e.article2.articles_slug&&S(!0))}),o(U,{get when(){return e.article1||e.article2},get children(){const C=u(ae),k=C.firstChild,L=k.nextSibling,A=L.nextSibling;return s(k,o(U,{get when(){return e.article1},keyed:!0,children:r=>(()=>{const h=u(ie);return s(h,o(z,{get headline(){return r.articlesDrafts_headline},get excerpt(){return r.articlesDrafts_excerpt},get author(){return`${r.users_name1} ${r.users_name2}`},get authorId(){return r.users_userid},get category(){return r.categories_name},get categoryColor(){return r.categories_backgroundColor},get categoryLink(){return r.categories_name},get imageUrl(){return r.image},get articleUrl(){return r.url},isVertical:!1,get isPortrait(){return r.articles_isThumbnailPortrait},hideCategoryAccent:!1,get page(){return e.page}})),h})()})),s(A,o(U,{get when(){return e.article2},keyed:!0,children:r=>(()=>{const h=u(se);return s(h,o(z,{get headline(){return r.articlesDrafts_headline},get excerpt(){return r.articlesDrafts_excerpt},get author(){return`${r.users_name1} ${r.users_name2}`},get authorId(){return r.users_userid},get category(){return r.categories_name},get categoryColor(){return r.categories_backgroundColor},get categoryLink(){return r.categories_name},get imageUrl(){return r.image},get articleUrl(){return r.url},isVertical:!1,get isPortrait(){return r.articles_isThumbnailPortrait},hideCategoryAccent:!1,get page(){return e.page}})),h})()})),I(()=>f(C,`relative flex w-full flex-row ${e.bottomBorder&&!R()&&"border-b-2 border-gray-300"} mt-2 pb-2`)),C}})},oe=d('<div class="absolute left-1/2 top-1/2 h-10 w-10 -translate-x-1/2 -translate-y-1/2"><div class="h-full w-full animate-spin rounded-full border-t-2 border-l-2 border-black"></div></div>'),ue=d(`<div class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"><p class="text-center font-arno text-lg md:text-2xl lg:text-4xl" id="searchFallback">We couldn't find anything for “<!#><!/>”</p></div>`),de=d('<div class="flex  w-full flex-col" id="searchResults_container"><h1 class="mx-auto mb-4 text-lg md:mx-0 md:text-2xl lg:text-4xl">Results for “<!#><!/>”</h1><!#><!/></div>'),ge=d('<div class="my-4 w-full" id="paginator_container"></div>'),_e=d('<div class="h-full w-full"><!#><!/><!#><!/><!#><!/></div>'),$e=d("<div></div>"),ve=()=>{const[e,R]=P([]),[S,C]=P(),[k,L]=P(!0),[A,r]=P(""),[h,Q]=P(0),[g,M]=P(0),N=p("(min-width: 768px)"),v=6,V=5;return Z(async()=>{const $=new URLSearchParams(window.location.search),m=Object.fromEntries($.entries()).q;if(m&&m.length>0){const D=decodeURIComponent(m);r(D);const E=new FormData;E.append("searchterm",D),fetch("/api/searchSuggestions.php",{method:"POST",body:E}).then(async x=>{if(x.status!==200)throw new Error(x.statusText);const w=await x.json();if(w.result)C(w.response[w.response.length-1]),R(w.response),Q(Math.ceil(w.response.length/v)),M(0);else throw new Error("Bad result from search API")}).catch(x=>{console.error(x)}).finally(()=>L(!1))}else L(!1)}),(()=>{const $=u(_e),B=$.firstChild,[m,D]=y(B.nextSibling),E=m.nextSibling,[x,w]=y(E.nextSibling),W=x.nextSibling,[j,O]=y(W.nextSibling);return s($,o(U,{get when(){return k()},get children(){return u(oe)}}),m,D),s($,o(U,{get when(){return q(()=>e()===null||e().length===0)()&&!k()},get children(){const l=u(ue),n=l.firstChild,c=n.firstChild,a=c.nextSibling,[t,_]=y(a.nextSibling);return t.nextSibling,s(n,A,t,_),l}}),x,w),s($,o(U,{get when(){return q(()=>e()!==null&&e().length>0)()&&!k()},get children(){return[(()=>{const l=u(de),n=l.firstChild,c=n.firstChild,a=c.nextSibling,[t,_]=y(a.nextSibling);t.nextSibling;const b=n.nextSibling,[F,H]=y(b.nextSibling);return s(n,A,t,_),s(l,o(U,{get when(){return N()},get fallback(){return o(G,{get each(){return[...e().slice(g()*v,g()*v+v)]},children:(i,J)=>(()=>{const Y=u($e);return s(Y,o(z,{get headline(){return i.articlesDrafts_headline},get excerpt(){return i.articlesDrafts_excerpt},get author(){return`${i.users_name1} ${i.users_name2}`},get authorId(){return i.users_userid},get category(){return i.categories_name},get categoryColor(){return i.categories_backgroundColor},get categoryLink(){return i.categories_name},get imageUrl(){return i.image},get articleUrl(){return i.url},isVertical:!1,get isPortrait(){return i.articles_isThumbnailPortrait},hideCategoryAccent:!1,page:g})),I(()=>f(Y,`mt-4 ${J()!==v-1&&i.articles_slug!==S()?.articles_slug&&"border-b-2 border-gray-300"} pb-4`)),Y})()})},get children(){return o(G,{each:[0,2,4],children:i=>o(U,{get when(){return e().length>=g()*v+i},get children(){return o(ce,{get article1(){return e()[g()*v+i]},get article2(){return e()[g()*v+i+1]},bottomBorder:i!==4,page:g,get lastArticle(){return S()}})}})})}}),F,H),l})(),(()=>{const l=u(ge);return s(l,o(ee,{page:g,setPage:M,pages:h,pagesToDisplay:V})),l})()]}}),j,O),$})()};export{ve as default};
