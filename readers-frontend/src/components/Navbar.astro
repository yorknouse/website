---
import { Icon } from "astro-icon";
import { getMenuCategories } from "./utils/categories";
import DesktopNavbar from "./DesktopNavbar.astro";
import MobileNavbar from "./MobileNavbar.astro";
import prisma from "src/prisma";

interface Props {
  active: string | undefined;
  style: "muse" | "nouse";
}

const { active, style = "nouse" } = Astro.props;

const baseUrl =
  style === "nouse"
    ? import.meta.env.BASE_URL
    : `${import.meta.env.BASE_URL}muse/`;

const menuCategories = await getMenuCategories(style);
---

<DesktopNavbar
  active={active}
  baseUrl={baseUrl}
  menuCategories={menuCategories}
  style={style}
/>

<MobileNavbar
  active={active}
  baseUrl={baseUrl}
  menuCategories={menuCategories}
  style={style}
/>

<script>
  const searchBtnList = document.querySelectorAll(
    ".searchBtnClassIdentifier"
  ) as NodeListOf<HTMLButtonElement>;
  const searchInterface = document.getElementById(
    "searchInterface"
  ) as HTMLElement;

  searchBtnList.forEach((searchBtn) => {
    searchBtn.addEventListener("click", () => {
      searchInterface.classList.remove("invisible", "opacity-0");
    });
  });
</script>
