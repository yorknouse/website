---
import { Icon } from "astro-icon";
import SearchComponent from "./SolidJS/SearchComponent";
---

<div
  class="bg-whiteish-100 invisible fixed top-0 left-0 z-50 flex h-screen w-screen flex-col opacity-0 transition-opacity duration-500"
  id="searchInterface"
>
  <button
    id="searchCloseBtn"
    class="absolute top-0 right-0 w-16 p-2 text-black"
  >
    <Icon name="ic:baseline-close" />
  </button>
  <SearchComponent client:only/>
</div>

<script>
  const closeBtn = document.getElementById("searchCloseBtn") as HTMLElement;
  const form = document.getElementById("searchForm") as HTMLFormElement;
  const searchInterface = document.getElementById(
    "searchInterface"
  ) as HTMLElement;

  closeBtn.addEventListener("click", () => {
    console.log("click");
    searchInterface.classList.add("invisible", "opacity-0");
  });
  // form.addEventListener("submit", (ev) => {
  //   ev.preventDefault();
  //   const input = document.getElementById("searchBox") as HTMLInputElement;

  //   const data = new FormData();
  //   data.append("searchterm", input.value);

  //   // TODO: perform api request with input.value
  //   fetch("/api/searchSuggestions.php", {
  //     method: "POST",
  //     body: data,
  //   })
  //     .then(async (res) => {
  //       if (res.status === 200) {
  //         const response = await res.json();

  //         console.log(response);
  //       } else throw new Error(res.statusText);
  //     })
  //     .catch((e) => console.error(e));
  //   // .then((res) => res.json())
  //   // .then((response) => console.log(response))
  //   // .catch((e) => console.error(e));
  // });
</script>
